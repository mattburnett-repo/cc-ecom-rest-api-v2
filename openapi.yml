openapi: "3.0.0"

info:
  description: "Generic endpoints for an e-commerce REST API"
  version: "1.0.0"
  title: "E-commerce REST API"

servers:
  - url: http://localhost:4000
    description: Local dev server. No SSL. You probably can't see this.
  - url: https://e-commerce-rest-api-v2.herokuapp.com
    description: Production server. Should provide SSL.

tags:
- name: "cart"
  description: "User cart endpoint"
- name: "login"
  description: "Login endpoint"
- name: "order"
  description: "Order endpoint"
- name: "product"
  description: "Product endpoint"
- name: "register"
  description: "Register endpoint"
- name: "user"
  description: "User endpoint"

paths:
  /api/v1/cart:
    get:
      tags: 
      - "cart"
      summary: "Get all carts"
      description: "Get all carts without an order date"
      parameters: []
      responses:
        200:
          description: 200 Success
        204:
          description: 204 No Content
        400:
          description: 400 Bad request
    post:
      tags: 
      - "cart"
      summary: "Add item to a cart"
      description: "Add an item to an existing cart"
      parameters:
        - name: cartID
          in: header
          required: true
          description: Id of cart to add item to.
          schema:
            type : integer
            format: int64
            minimum: 1
        - name: product_id
          in: header
          required: true
          description: Id of product to add to cart.
          schema:
            type : integer
            format: int64
            minimum: 1
        - name: product_quantity
          in: header
          required: true
          description: How many of item to add to cart.
          schema:
            type : integer
            format: int64
            minimum: 1
        - name: product_price
          in: header
          required: true
          description: Individual price of item to add to cart.
          schema:
            type : number
            format: int64
            minimum: 0.00
      responses:
        200:
          description: 200 Success
        400:
          description: 400 Bad request
    put:
      tags: 
      - "cart"
      summary: "Update a cart item"
      description: "Update a cart item's quantity and line item price"
      parameters:
        - name: cartID
          in: header
          required: true
          description: Id of cart that has item to update.
          schema:
            type : integer
            format: int64
            minimum: 1
        - name: product_id
          in: header
          required: true
          description: Id of product to update.
          schema:
            type : integer
            format: int64
            minimum: 1
        - name: product_quantity
          in: header
          required: true
          description: How many of item to update.
          schema:
            type : integer
            format: int64
            minimum: 1
        - name: product_price
          in: header
          required: true
          description: Individual price of item to update.
          schema:
            type : number
            format: int64
            minimum: 0.00
      responses:
        200:
          description: 200 Success
        204:
          description: 204 No content
        400:
          description: 400 Bad request
    delete:
      tags: 
      - "cart"
      summary: "Delete a cart item"
      description: "Delete a cart item"
      parameters:
        - name: cartID
          in: header
          required: true
          description: Id of cart that has item to delete.
          schema:
            type : integer
            format: int64
            minimum: 1
        - name: itemID
          in: header
          required: true
          description: Id of item to delete.
          schema:
            type : integer
            format: int64
            minimum: 1
      responses:
        200:
          description: 200 Success
        400:
          description: 400 Bad request
  /api/v1/cart/{cartID}:
    get:
      tags: 
        - "cart"
      summary: "Get a cart by id"
      description: "Get a cart by cart id"
      parameters:
        - name: cartID
          in: path
          required: true
          description: Id of cart to retrieve.
          schema:
            type : integer
            format: int64
            minimum: 1
      responses:
        200:
          description: 200 Success
        204:
          description: 204 No Content
        400:
          description: 400 Bad request
  /api/v1/login:
    get:
      tags: 
      - "login"
      summary: "Show default page"
      description: "Show login page"
      parameters: []
      responses:
        200:
          description: 200 Success
        400:
          description: 400 Bad request
    post:
      tags: 
      - "login"
      summary: "Login"
      description: "Log in a user with provided username/password and auth via passport"
      parameters:
        - name: username
          in: header
          required: true
          description: Username of attempted login.
          schema:
            type : string
        - name: password
          in: header
          required: true
          description: Password of attempted login.
          schema:
            type : string
      responses:
        200:
          description: 200 Success
        401:
          description: 401 Not Authorized
        400:
          description: 400 Bad request
  /api/v1/order:
    get:
      tags: 
      - "order"
      summary: "Get orders"
      description: "Get all orders in the database"
      parameters: []
      responses:
        200:
          description: 200 Success
        400:
          description: 400 Bad request
    post:
      tags: 
      - "order"
      summary: "Create an order"
      description: "Create an order from a user's cart"
      parameters: []
      responses:
        200:
          description: 200 Success
        400:
          description: 400 Bad request
    delete:
      tags: 
      - "order"
      summary: "Delete order"
      description: "Delete an order by id"
      parameters:
        - name: orderID
          in: header
          required: true
          description: Id of order to delete.
          schema:
            type : integer
            format: int64
            minimum: 1
      responses:
        200:
          description: 200 Success
        400:
          description: 400 Bad request
  /api/v1/order/{orderID}:
    get:
      tags: 
      - "order"
      summary: "Get order by id"
      description: "Get an order by id"
      parameters:
        - name: orderID
          in: path
          required: true
          description: Id of order to retrieve.
          schema:
            type : integer
            format: int64
            minimum: 1
      responses:
        200:
          description: 200 Success
        400:
          description: 400 Bad request
  /api/v1/product:
    get:
      tags: 
      - "product"
      summary: "Get products"
      description: "Get all products in the database"
      parameters: []
      responses:
        200:
          description: 200 Success
        400:
          description: 400 Bad request
    post:
      tags: 
      - "product"
      summary: "Add a product"
      description: "Add a product to the database"
      parameters:
        - name: name
          in: header
          required: true
          description: Name of product to add to database.
          schema:
            type : string
        - name: description
          in: header
          required: true
          description: Description of product to add to database.
          schema:
            type : string
        - name: price
          in: header
          required: true
          description: Individual price of product to add to database..
          schema:
            type : number
            format: int64
            minimum: 0.00
      responses:
        201:
          description: 201 Created
        400:
          description: 400 Bad request
    put:
      tags: 
      - "product"
      summary: "Update"
      description: "Update a product's name / description / price"
      parameters:
        - name: id
          in: header
          required: true
          description: Id of product to update.
          schema:
            type : integer
            format: int64
            minimum: 1
        - name: name
          in: header
          required: true
          description: Name of product to update.
          schema:
            type : string
        - name: description
          in: header
          required: true
          description: Description of product to update.
          schema:
            type : string
        - name: price
          in: header
          required: true
          description: Individual price of product to update.
          schema:
            type : number
            format: int64
            minimum: 0.00
      responses:
        200:
          description: 200 Success
        204:
          description: 204 No content
        400:
          description: 400 Bad request
    delete:
      tags: 
      - "product"
      summary: "Delete product"
      description: "Delete product from the database"
      parameters:
        - name: id
          in: header
          required: true
          description: Id of product to delete from database.
          schema:
            type : integer
            format: int64
            minimum: 1
      responses:
        204:
          description: 204 No content
        400:
          description: 400 Bad request
  /api/v1/product/{productID}:
    get:
      tags: 
      - "product"
      summary: "Get product"
      description: "Get a product by id"
      parameters:
        - name: productID
          in: path
          required: true
          description: Id of product to retrieve.
          schema:
            type : integer
            format: int64
            minimum: 1
      responses:
        200:
          description: 200 Success
        400:
          description: 400 Bad request
  /api/v1/register:
    get:
      tags: 
      - "register"
      summary: "Get"
      description: "Displays register form page"
      responses:
        200:
          description: 200 Success
        400:
          description: 400 Bad request
    post:
      tags: 
      - "register"
      summary: "Add user"
      description: "Adds user to database"
      responses:
        200:
          description: 200 Success
        400:
          description: 400 Bad request
  /api/v1/user:
    get:
      tags: 
      - "user"
      summary: "Get all users"
      description: "Get all users from the database"
      parameters: []
      responses:
        200:
          description: 200 Success
        204:
          description: 204 No Content
        400:
          description: 400 Bad request
    post:
      tags: 
      - "user"
      summary: "Create a user"
      description: "Add a user record to the database"
      parameters:
        - name: user_name
          in: header
          required: true
          description: User name to add to database.
          schema:
            type : string
        - name: password
          in: header
          required: true
          description: Password to add to database.
          schema:
            type : string
      responses:
        201:
          description: 201 Created
        400:
          description: 400 Bad request
    put:
      tags: 
      - "user"
      summary: "Update a user"
      description: "Update a user record in the database"
      parameters:
        - name: user_id
          in: header
          required: true
          description: User id to update in database.
          schema:
            type : integer
            format: int64
            minimum: 1
        - name: user_name
          in: header
          required: true
          description: User name to update in database.
          schema:
            type : string
        - name: password
          in: header
          required: true
          description: Password to update in database.
          schema:
            type : string
      responses:
        200:
          description: 200 Sucess
        204:
          description: 204 No content
        400:
          description: 400 Bad request
    delete:
      tags: 
      - "user"
      summary: "Delete a user"
      description: "Delete a user record from the database"
      parameters:
        - name: userID
          in: header
          required: true
          description: Id of user to delete from database.
          schema:
            type: integer
            format: int64
            minimum: 1
      responses:
        200:
          description: 200 Sucess
        400:
          description: 400 Bad request
  /api/v1/user/{userID}:
    get:
      tags: 
      - "user"
      summary: "Get a user"
      description: "Get a user record from the database"
      parameters:
      - name: userID
        in: path
        required: true
        description: Id of user to retrieve.
        schema:
          type : integer
          format: int64
          minimum: 1
      responses:
        200:
          description: 200 Success
        400:
          description: 400 Bad request
